<html>
	<head>
		<link href="./fontawesome/css/all.min.css" rel="stylesheet" />

		<style>
			:root {
				--tooltip-font-size: '1em';
				--legend-font-size: '1em';
			}

			.homey-widget {
				height: 100%;
				display: flex;
				flex-direction: column;
				align-items: center;
				justify-content: flex-start;
				padding: 0 !important;
				box-sizing: border-box;
			}

			#chart-container {
				height: 100%;
				flex-grow: 1;
				width: 100%;
			}

			#line-chart {
				height: 100%;
				width: 100%;

				/* Prevent default focus highlight on click */
				outline: none;
				user-select: none;
				-webkit-tap-highlight-color: transparent;
				flex-grow: 1;
			}

			#controls {
				margin-top: 0.2em;
				width: 100%;
				padding-left: 10px;
				display: flex;
				flex-direction: column;
				align-items: center;
				justify-content: center;
			}

			.tooltip {
				font-size: var(--tooltip-font-size);
			}

			.toggle {
				align-self: flex-start;
				display: flex;
				align-items: center;
				width: 100%;
				box-sizing: border-box;
				padding-right: 10px;
				font-size: var(--homey-font-size-small);
				line-height: calc(var(--homey-line-height-small) * (var(--legend-font-size) / var(--base-font-size)));

				&.hidden {
					opacity: 0.4;
				}

				.toggle-icon {
					margin-left: 0.5em;
					margin-right: 0.75em;
					width: 0.5em;
					height: 0.5em;
					border-radius: 50%;
					background-color: var(--homey-color-mono-200);
					display: inline-block;
					font-size: var(--legend-font-size);
				}
				
				.label {
					flex: 1;
					overflow: hidden;
					text-overflow: ellipsis;
					white-space: nowrap;
					min-width: 0;
					font-size: var(--legend-font-size);
				}

				.units {
					margin-left: auto;
					padding-left: 0.5em;
					white-space: nowrap;
					flex-shrink: 0;
					font-size: calc(var(--legend-font-size) * 0.85);
				}
			}


			#progress {
				position: relative;
				width: 100%;
				height: 20px;
				display: flex;
				align-items: center;
			}

			#progress-icon {
				position: relative;
				z-index: 2;
				margin-left: 0.5em;
				margin-right: 0.25em;
				color: var(--homey-text-color-light);
			}

			#progress-track {
				position: absolute;
				left: 2em; /* Adjust based the icon width + margin */
				right: 0;
				top: 50%;
				transform: translateY(-50%);
				height: 2px;
				background-color: var(--homey-color-mono-200);
			}

			#progress-bar {
				position: absolute;
				left: 0;
				top: 0;
				height: 100%;
				width: 0%;
				background-color: var(--homey-color-mono-400);
				transition: width 1s linear;
			}
		</style>
		<script src="./echarts.min.js" charset="utf-8"></script>
	</head>

	<body class="homey-widget">
		<div id="chart-container">
			<div id="line-chart"></div>
		</div>
		<div id="controls">
			<div id="progress" style="display: none;">
				<i id="progress-icon" class="fa-solid fa-arrows-rotate homey-text-small"></i>
				<div id="progress-track">
					<div id="progress-bar"></div>
				</div>
			</div>
			<div id="toggle1" class="toggle homey-text-small-light" style="display: none">
				<span class="toggle-icon"></span>
				<span class="label"></span>
				<span class="units"></span>
			</div>
			<div id="toggle2" class="toggle homey-text-small-light" style="display: none">
				<span class="toggle-icon"></span>
				<span class="label"></span>
				<span class="units"></span>
			</div>
			<div id="toggle3" class="toggle homey-text-small-light" style="display: none">
				<span class="toggle-icon"></span>
				<span class="label"></span>
				<span class="units"></span>
			</div>
			<div id="toggle4" class="toggle homey-text-small-light" style="display: none">
				<span class="toggle-icon"></span>
				<span class="label"></span>
				<span class="units"></span>
			</div>
		</div>
		<script charset="utf-8">
			window.echarts = echarts;
		</script>
		<script defer src="script.mjs"></script>
	</body>
</html>